# 前端

1. 前端业务概览
2. 多端和多平台
3. 跨平台代码复用
4. APP端技术架构
5. 性能和异常监控


## 2.多端和多平台
![image](https://user-images.githubusercontent.com/13233825/147320486-7fbd9e4c-0068-475a-9f7f-25be8f47edbb.png)

__多端__
- APP端：侧重体验和性能，功能齐全，功能可定制程度很高
- 小程序端：操作简单，
- Web：响应式，SEO，落地页承接等

__多平台__

不同平台，提供的基础能力不一样，同一个动作（比如支付）表现出来的交互形式也有差别。这些都属于基础能力，可以投入一次性的对齐处理，抹平差异，且对开发业务代码无感。


## 3.跨平台代码复用
__跨平台代码复用__ 主要处理的是不同平台间的基础能力的对齐，在对齐时会选择一个平台为基准，写代码时只需要遵循一种写法。携程APP和去哪儿APP，选取的是携程的基础库为准，去哪儿对齐。小程序端是已微信平台为基础，其他各端通过Taro可以直接转。平台的差异已经由自研或第三方工具对齐处理。

__跨端复用__ 处理起来比跨平台复杂很多，和具体业务场景关联密切。往往涉及的是具体的业务功能，比如APP的保险加购功能代码，想要在小程序上进行复用，这个场景就会涉及：
- 是通过同步代复用还是`chery-pick`
  - 直接 `Merge` 主分支代码：会包含其他不需要的功能
  - `cherry pick`：当迭代时间不一致，代码版本有差异时

目前我们实现跨端和跨平台的情况如下
> APP & H5 & 去哪儿

![image](https://user-images.githubusercontent.com/13233825/147324305-6ba327b5-9fc3-441c-9631-a5c71c605062.png)

> 小程序

![image](https://user-images.githubusercontent.com/13233825/147324497-a9f990eb-1566-4505-816c-8c963df0bc87.png)


## 4. APP端技术架构
![image](https://user-images.githubusercontent.com/13233825/147324966-20104b2e-3502-46f2-a506-f13c670be924.png)



- 视图
- 状态


__数据流__
APP中基于Saga进行业务逻辑处理，数据流程过程如下
![image](https://user-images.githubusercontent.com/13233825/147329846-75448c33-2e62-41d1-ba46-3e4e630d8e8e.png)
